---
title: "꿀군고구마"
summary: "근데 이제 scroll 이벤트를 곁들인.."
date: "2022.03.31"
thumbnailUrl: "/static/images/babchive/day1/20220331.jpg"
---

<div align="center">
	<img src="/static/images/babchive/day1/20220331.jpg" width="300px" alt="꿀군고구마" />
</div>

## 🍠 철 지난 군고구마

> 철 지나도 맛있는 건 늘 맛있다

오늘은 재택근무!  
매일 점심에 먹은 걸 찍어올리려고 했는데 ~~까먹고 안 찍었다.~~  
대신 오늘 저녁 메뉴를 올린다. 닭가슴살 2개에 고구마 하나.  
엄청난 건강식이다. 아무래도 건강은 소중하니까..

## ✍️ 그냥 쓰는 글

오늘은 오늘 배운 걸 그~~냥 써보려고 한다.  
글 잘 쓰는 사람이 되고 싶어서 대충이라도 자주 쓰는 연습을 해보려고!

`lodash`라는 인기있는 자바스크립트 라이브러리가 있는데,  
놀랍게도 입사할 때까지 한 번도 써본 적이 없었다. 들어보기만 했지 쓸 일이 없었던 것. (없었나?)

그런데 업무 투입되고 직접 써보니까 여러 기능들이 잘 구현되어 있어서 쉽게 갖다쓸 수 있더라.  
~~역시 소문난 맛집은 배신하지 않는다.~~  
이 이야기를 하려던 건 아니고, 오늘은 `scroll` 이벤트에 대해 짤막하게 써보려고 한다.

오늘 머리를 싸맸던 부분은 `scroll` 이벤트였다.

처음에 입사하고 팀원분이 해주신 말씀 중에 기억에 남는 말이 있다.

> 취준 때는 기술을 쓰기 위해 공부해왔다면, 입사하고 나서부터는 그 기술을 잘 쓰기 위해 공부를 하는 것이다.

그래서 어떻게 하면 `scroll` 이벤트를 잘 사용할 수 있을까 고민했다.

그냥 생각나는대로 짜보자면,

```javascript
window.addEventListener("scroll", () => {
	/* 이벤트 핸들러 함수*/
});
```

이런 방식으로 짜면 될 것 같은데, 이렇게 짜면 스크롤을 할 때마다 이벤트가 발생하게 된다.  
그래서 내부에서 콘솔을 찍어보면 나는 한 번 스크롤 했는데? 100번 찍혀있는 걸 볼 수 있다. ~~이게 무슨~~

불필요한 이벤트 발생을 방지하기 위해 일단 `debounce`를 이용해보기로 했다.  
`debounce`는 쉽게 말해 이벤트를 일정 시간동안 일어난 이벤트를 하나로 퉁치는 기능이다.  
예를 들어, 스크롤 이벤트의 경우 스크롤이 끝난 다음(스크롤을 뗐을 때)에 이벤트가 한 번만 발생하게 된다.  
클릭 이벤트를 예로 들면 엄청나게 광클했을 때, 마지막 한 번의 클릭만 잡아주는 엄청난 기법이다.  
대박 ㄴ😲ㄱ

내가 해보고 싶었던 건 `scroll` 이벤트의 시작과 끝 지점을 잡아내는 거였다.
[스택 오버플로우](https://stackoverflow.com/questions/3701311/event-when-user-stops-scrolling)에서 찾아보니 이런 코드가 있더라.

```javascript
(function () {
	var timer;
	$(window).bind("scroll", function () {
		clearTimeout(timer);
		timer = setTimeout(refresh, 150);
	});
	var refresh = function () {
		// do stuff
		console.log("Stopped Scrolling");
	};
})();
```

`debounce`를 빼고 이 코드를 녹여봤는데, 이런 식으로 작성하니까 끝은 잘 잡지만, 이벤트의 시작을 잡는 게 제대로 동작을 안 했다.  
이벤트의 시작이 잡히긴 하는데 시작이라기 보다는..  
나는 원래 `시작 -중략- 끝`을 노렸는데, `시작 시작 시작 시작 끝` 이런 식으로 동작해서 콘솔이 여러번 찍히더라.

그래서 뭐 이러저러한 삽질을 하다가, `lodash`의 `debounce`에 있는 옵션을 활용하게 되었다.  
여기에는 두 가지 옵션이 있다.

- leading
  - 기본값은 false
  - true로 설정할 경우 이벤트가 처음 시작하는 점을 잡음
- trailing
  - 기본값은 true
  - true로 설정할 경우 이벤트가 다 실행되고, 기다리는 시간 기다린 다음 실행

그래서 결론. 어떻게 했냐면

```javascript
debounce(() => {
    /* 이벤트 핸들러 함수 */
}, 기다리는 시간, {
    leading: true,
    trailing: true
})
```

이렇게 짰더니 이벤트 핸들링 함수가 스크롤 발생 처음에 한 번, `(스크롤이 끝난 시간) + (기다리는 시간)` 다음에 한 번 발생하게 되었다.

엄청 삽질했는데 정리하고 보니까 별 거 없네.. 머쓱  
별 거 아니지만 **뿌듯😊**

오늘도 고생많았다..

-끝-
